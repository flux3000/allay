{% extends "planner/layout.html" %}

{% block subtitle %}Procedure Options | {% endblock %}

{% block content %}

<main id="options">

	<div class="options_header">
		<header>
			<h2>Your Procedure Options</h2>
		</header>
		<div class="options_description">
			<div class="responses">You responded that you are <span class="response_age">(unknown)</span> years of age, you are in <span class="response_location">(unknown)</span>, and you are <span class="response_weeks">(unknown)</span> weeks pregnant.<br><a href="/intake">(Back to intake form)</a></div>

			<div class="over_10">You are over 10 weeks pregnant, and are eligible for a surgical abortion. Please note that medical abortion (i.e., pill induced miscarriage) are only available for pregnancies up until exactly 10 weeks.</div>

			<div class="under_10">Medical abortions (i.e., pill) are permitted only up until 10 week of pregnancy. This means you only have <span class="weeks_remaining_pill">(unknown)</span> remaining for this option. After this time passes, you will only be eligible for a surgical abortion.</div>

			<div class="exactly_10">Medical abortions (the abortion pill) are permitted only up until the 10th week of pregnancy. You are currently in your 10th week, so you will only be eligible for an in-clinic abortion.</div>

<!-- 			<div class="state_law_header">Texas State Law Restrictions to Know</div>
			<div class="location_texas">In Texas, state law permits in-clinic abortions through 22 weeks of pregnancy. You have <span class="weeks_remaining_abortion">(unknown)</span> remaining until you will no longer be able to have an abortion in Texas. After that point, you will need to explore out-of-state options.</div>
 -->
		</div>
	</div>

	<div class="options_procedures" id="optionsProcedures">
		<header>
			<h4>Please choose one of these two options for your procedure.</h4>
		</header>
		<div class="options_button_wrapper row">
			<div class="options_button_container small-12 medium-6 columns">
				<div class="button_check"><i class="fa fa-check"></i></div>
				<button class="large option_button" data-option="pill">Pill (Medical Abortion)</button>
				<div class="options_button_description">
					Medical abortion requires two pills to stop the pregnancy.
				</div>
				<div class="options_button_faq">
					<div class="faq_header">Facts Breakdown:</div>
					<ul>
					<li>The pill is safe. Only 1% of women who take it experience complications.</li>
					<li>It is 95% effective. If it fails you can take it again.</li>
					<li>The abortion will be complete within 1 to 2 days after taking the second pill.</li>
					<li>States laws on medical abortions vary. See state policies for more information.</li>
					</ul>
				</div>
			</div>
			<div class="options_button_container small-12 medium-6 columns">
				<div class="button_check"><i class="fa fa-check"></i></div>
				<button class="large option_button" data-option="clinic">Procedure (Surgical Abortion)</button>
				<div class="options_button_description">
					Surgical abortion involves a minor surgery.
				</div>
				<div class="options_button_faq">
					<div class="faq_header">Facts Breakdown:</div>
					<ul>
					<li>Surgical abortions (up to 14 weeks) carry fewer complications than giving birth.</li>
					<li>A surgical abortion procedure itself takes 15 to 20 minutes.</li>
					<li>You will be sedated to make you sleepy and relaxed. Local anesthetic will be administered to make you comfortable.
					<li>You will have a short recovery time after the procedure.</li>
					<li>States laws on surgical abortions vary. See state policies for more information.</li>
					</ul>
				</div>

			</div>
		</div>
	</div>


	<div class="options_locations" id="optionsLocations">
		<header>
			<h4>Here are some abortion service providers near you.</h4>
			<div class="locations_subheader">
				These providers offer services that you have chosen and/or are available to you. Please contact them to set up an appointment <strong>in advance</strong>, otherwise you may need to explore other service options.
			</div>
		</header>
		<div class="locations_wrapper">

			<div class="clinic_row_header row">
				<div class="clinic small-6 columns">
					<div class="clinic_name">Provider Name</div>
				</div>
				<div class="clinic_distance small-2 columns">
					Distance Away
				</div>
				<div class="clinic_cost small-2 columns">
					Est. Cost
				</div>
				<div class="clinic_select small-2 columns">
					&nbsp;
				</div>
			</div>

			<div class="clinic_row row california">
				<div class="clinic small-12 medium-6 columns">
					<div class="clinic_name">
						B Street Health Center
					</div>
					<div class="clinic_address">
						201 29th Street, Ste. B, Sacramento, CA 95816
					</div>
					<div class="clinic_phone">
						(916) 446-6921
					</div>
				</div>
				<div class="clinic_distance small-12 medium-2 columns">
					<div class="label">Distance:</div>1.9 miles
				</div>
				<div class="clinic_cost small-12 medium-2 columns">
					<div class="label">Estimated Cost:</div>$650
				</div>
				<div class="clinic_select small-12 medium-2 columns">
					<button class="clinic_select_btn">Select</button>
				</div>
			</div>

			<div class="clinic_row row california">
				<div class="clinic small-12 medium-6 columns">
					<div class="clinic_name">
						Sac Valley Pregnancy Clinic
					</div>
					<div class="clinic_address">
						2316 Bell Executive Lane, Sacramento, CA 95825
					</div>
					<div class="clinic_phone">
						(916) 451-2273
					</div>
				</div>
				<div class="clinic_distance small-12 medium-2 columns">
					<div class="label">Distance:</div>4.5 miles
				</div>
				<div class="clinic_cost small-12 medium-2 columns">
					<div class="label">Estimated Cost:</div>$695
				</div>
				<div class="clinic_select small-12 medium-2 columns">
					<button class="clinic_select_btn">Select</button>
				</div>
			</div>
			<div class="clinic_row row california noborder">
				<div class="clinic small-12 medium-6 columns">
					<div class="clinic_name">
						Choice Medical Group @ FPA Women's Health
					</div>
					<div class="clinic_address">
						2322 Butano Dr #205 Sacramento, CA 95825
					</div>
					<div class="clinic_phone">
						(877) 883-7264
					</div>
				</div>
				<div class="clinic_distance small-12 medium-2 columns">
					<div class="label">Distance:</div>8.9 miles
				</div>
				<div class="clinic_cost small-12 medium-2 columns">
					<div class="label">Estimated Cost:</div>$800
				</div>
				<div class="clinic_select small-12 medium-2 columns">
					<button class="clinic_select_btn">Select</button>
				</div>
			</div>
			<div class="clinic_row row texas">
				<div class="clinic small-12 medium-6 columns">
					<div class="clinic_name">
						Women's Center of Houston
					</div>
					<div class="clinic_address">
						(832) 705-6370
					</div>

					<div class="clinic_phone">
						(713) 868-4483
					</div>
				</div>
				<div class="clinic_distance small-12 medium-2 columns">
					<div class="label">Distance:</div>12.5 miles
				</div>
				<div class="clinic_cost small-12 medium-2 columns">
					<div class="label">Estimated Cost:</div>$750
				</div>
				<div class="clinic_select small-12 medium-2 columns">
					<button class="clinic_select_btn">Select</button>
				</div>
			</div>
			<div class="clinic_row row texas">

				<div class="clinic small-12 medium-6 columns">
					<div class="clinic_name">
						Suburban Women's Clinic
					</div>
					<div class="clinic_address">
						3101 Richmond Ave #250, Houston, TX 77098
					</div>

					<div class="clinic_phone">
						(713) 222-9832
					</div>
				</div>
				<div class="clinic_distance small-12 medium-2 columns">
					<div class="label">Distance:</div>18.9 miles
				</div>
				<div class="clinic_cost small-12 medium-2 columns">
					<div class="label">Estimated Cost:</div>$700
				</div>
				<div class="clinic_select small-12 medium-2 columns">
					<button class="clinic_select_btn">Select</button>
				</div>
			</div>

			<div class="clinic_row row texas noborder">
				<div class="clinic small-12 medium-6 columns">
					<div class="clinic_name">
						Houston Women's Clinic
					</div>
					<div class="clinic_address">
						4820 San Jacinto St, Houston, TX 77004
					</div>
					<div class="clinic_phone">
						(713) 868-4483
					</div>
				</div>
				<div class="clinic_distance small-12 medium-2 columns">
					<div class="label">Distance:</div>19.1 miles
				</div>
				<div class="clinic_cost small-12 medium-2 columns">
					<div class="label">Estimated Cost:</div>$595
				</div>
				<div class="clinic_select small-12 medium-2 columns">
					<button class="clinic_select_btn">Select</button>
				</div>
			</div>
		</div>
	</div>



	<div class="options_questions" id="optionsQuestions">
		<header>
			<h4>Please answer a few additional questions.</h4>
			<div class="questions_subheader">
				Your responses to these questions will help us to build your customized timeline for your procedure.
			</div>
		</header>
		<div class="options_form_wrapper">
			<div class="options_form">
				<div class="options_form_row row">
					<div class="options_form_question small-12 medium-8 columns">
						Will you be requiring child care or pet sitting while you are undergoing your procedure?
					</div>
					<div class="options_form_value small-12 medium-4 columns">

						<select id="question_childcare">
							<option value="">Select</option>
							<option value="">-------</option>
							<option value="">Yes</option>
							<option value="">No</option>
							<option value="">I don't know</option>
						</select>
					</div>
				</div>

				<div class="options_form_row row">
					<div class="options_form_question small-12 medium-8 columns">
						What will be your primary mode of transportation to the providing clinic?
					</div>
					<div class="options_form_value small-12 medium-4 columns">

						<select id="question_travel">
							<option value="">Select</option>
							<option value="">-------</option>
							<option value="">Car</option>
							<option value="">Bus</option>
							<option value="">Train/Subway</option>
							<option value="">Airplane</option>
							<option value="">Other</option>
							<option value="">I'm not sure</option>
						</select>
					</div>
				</div>

				<div class="options_form_row row">
					<div class="options_form_question small-12 medium-8 columns">
						How will you secure funds for the procedure (including the cost of the procedure, travel, lodging, and child/pet care)?
					</div>
					<div class="options_form_value small-12 medium-4 columns">

						<select id="question_funds">
							<option value="">Select</option>
							<option value="">-------</option>
							<option value="">I have the funds and will pay out-of-pocket</option>
							<option value="">I have insurance that will cover most of the cost</option>
							<option value="">I will need to borrow from friends/family</option>
							<option value="">I will need to request funds from a support organization</option>

						</select>
					</div>
				</div>

				<div class="options_form_button_row">
					<button class="large options_form_button" id="createTimeline">Create My Plan</button>
				</div>
			</div>
		</div>
	</div>





</main>

<script>

$(document).ready(function() {

	$('.main-nav__logo').addClass("is-visible");
	
	function getSearchParameters() {
	      var prmstr = window.location.search.substr(1);
	      return prmstr != null && prmstr != "" ? transformToAssocArray(prmstr) : {};
	}

	function transformToAssocArray( prmstr ) {
	    var params = {};
	    var prmarr = prmstr.split("&");
	    for ( var i = 0; i < prmarr.length; i++) {
	        var tmparr = prmarr[i].split("=");
	        params[tmparr[0]] = tmparr[1];
	    }
	    return params;
	}

	var params = getSearchParameters();
	var zip = params.zip;
	var adult = params.adult;
	var weeks = params.weeks;

	if (zip == "90057") {
		state = "california";
		$(".response_location").text("Sacramento, CA (90057)");

	} else {
		state = "texas";
		$(".response_location").text("Palacios, TX (77465)");
	}

	if (adult == "no") {
		$(".response_age").text("Under 18");
	} else {
		$(".response_age").text("18 years or older");
	}

	if (weeks > 0) {
		$(".response_weeks").text(weeks);

		if (weeks >= 10) {
			// only the clinic option is available.

			if (weeks == 10) {
				$(".exactly_10").show();
			} else {
				$(".over_10").show();
			}
			$(".options_locations").show();

			if (state == "texas"){
				$(".clinic_row.texas").fadeIn('slow');
			} else if (state == "california"){
				$(".clinic_row.california").fadeIn('slow');
			}

		} else if (weeks < 10) {
			$(".under_10, .options_procedures").fadeIn();
			var weeks_remaining_pill = 10 - weeks;
			if (weeks_remaining_pill == 1) {
				weeks_remaining_pill += " week";
			} else {
				weeks_remaining_pill += " weeks";
			}
			$(".weeks_remaining_pill").text(weeks_remaining_pill);
		}

		// var weeks_remaining_abortion = 22 - weeks;
		// if (weeks_remaining_abortion == 1) {
		// 	weeks_remaining_abortion += " week";
		// } else {
		// 	weeks_remaining_abortion += " weeks";
		// }
		// $(".weeks_remaining_abortion").text(weeks_remaining_abortion);

	}




	$(".option_button").click(function(e) {
		e.preventDefault();

		$(".option_button").removeClass("selected");
		$(this).addClass("selected");
		$(this).siblings('.button_check').animate({'opacity': 1});

		option = $(this).data("option");

		$(".options_locations").show(function() {
			$('html, body').animate({
		        scrollTop: $("#optionsLocations").offset().top
		    }, 1000);
		});

		if (state == "texas"){
			$(".clinic_row.texas").fadeIn('slow');
		} else if (state == "california"){
			$(".clinic_row.california").fadeIn('slow');
		}


	});

	$(".clinic_select_btn").click(function(e) {
		e.preventDefault();
		$(".options_questions").show(function() {
			$('html, body').animate({
		        scrollTop: $("#optionsQuestions").offset().top
		    }, 1000);
		});
		$(".clinic_select_btn, .clinic_row").removeClass("selected")
		$(".clinic_select_btn").text("Select");

		$(this).addClass("selected").text("Selected");
		$(this).parents(".clinic_row").addClass("selected");
		// $(".clinic_row").not(".selected").addClass("deselected");


	});


	$("#createTimeline").click(function(e){
		e.preventDefault();
		var location;

		if (state == "california") {
			location = "/timeline/ca/";
		}
		if (state == "texas") {
			location = "/timeline/tx/";
		}

		document.location = location;
	});


});

</script>

{% endblock %}
